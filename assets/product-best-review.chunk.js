var O=Object.defineProperty;var A=(n,c,e)=>c in n?O(n,c,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[c]=e;var k=(n,c,e)=>(A(n,typeof c!="symbol"?c+"":c,e),e),j=(n,c,e)=>{if(!c.has(n))throw TypeError("Cannot "+e)};var y=(n,c,e)=>(j(n,c,"read from private field"),e?e.call(n):c.get(n)),S=(n,c,e)=>{if(c.has(n))throw TypeError("Cannot add the same private member more than once");c instanceof WeakSet?c.add(n):c.set(n,e)},E=(n,c,e,o)=>(j(n,c,"write to private field"),o?o.call(n,e):c.set(n,e),e);window.bundleProducts={product_1:void 0,product_2:void 0,product_3:void 0};const B=document.getElementById("BundleMinimalPrice"),m=document.getElementById("StickyAddToCart"),w=document.getElementById("AddToCart"),P=document.getElementById("paymentButtonFoxsell"),T=document.getElementById("dynamic_properties");if(B){const n=document.getElementById("SubtotalValue"),c=n.textContent.concat(" ",B.textContent);window.currencySign=B.textContent.slice(0,1),window.minimalBundlePriceLabel=c,n.textContent&&(n.textContent=c)}function I(){var c;document.querySelectorAll("jc-product-picker").forEach(e=>e.reset()),document.getElementById("MainPaymentContainer").classList.add("jc-opacity-40","jc-pointer-events-none"),(c=document.getElementById("StickyAddToCart"))==null||c.classList.add("jc-opacity-40","jc-pointer-events-none"),document.querySelectorAll(".js-disabled-selector").forEach((e,o)=>{o!==0&&e.classList.add("jc-opacity-50","jc-pointer-events-none")});const n=window.bundleProducts;for(const e in n)n[e]=void 0}async function $(){let n=await M();if(n==null)return;let c=n==null?void 0:n.items[0].properties,e="";for(const[o,d]of Object.entries(c))e+=`<input type="hidden" name="properties[${o}]" value='${d}'></input>`;T.innerHTML=e}async function M(){var u,a;const n=window.bundleProducts;let c=Object.values(window.bundleProducts).filter(s=>s!=null).length;if(c!=3)return null;window.sessionStorage.getItem("bundleIdToRemove")&&await fetch(`${window.sessionStorage.getItem("bundleIdToRemove")}`);let e=[],o=[];for(const s of Object.keys(n))c==3&&(e.push(n[s][0]),o.push(n[s][1]));let d=0;if(c===3)for(const s of Object.keys(n)){if(((u=window==null?void 0:window.currencySign)==null?void 0:u.length)<1)break;const l=parseFloat(n[s][1].price.replace(window.currencySign,""));if(isNaN(l))break;d+=l}let t;return w.dataset.bundleType==="foxsell-bundle"?t={items:[{id:Number(window.bundleProductId),properties:{"__foxsell:dynamic_bundle_id":`${window.mixBundleId}_${Date.now()}`,"__foxsell:dynamic_bundle_category":JSON.stringify(e)},quantity:1}]}:w.dataset.bundleType.includes("foxsell-add-on")&&(t={items:[{id:Number(window.bundleProductId),properties:{"__foxsell:dynamic_add_on_bundle_id":`${window.mixBundleId}_${Date.now()}`,"__foxsell:dynamic_add_on_bundle_items":JSON.stringify(e),_totalRawPrice:d},quantity:1}],sections:(a=window.theme.utils)==null?void 0:a.sectionId(document.querySelector("cart-drawer"))}),o.map(s=>t.items[0].properties[s.title]=`x${o.filter(l=>l.title===s.title).length}`),t}function q(){var i;const n=window.bundleProducts,c=window.currencySign,e=document.querySelector("#SubtotalValue"),o=document==null?void 0:document.querySelector("#BtnSubtotalValue"),d=document.getElementById("InitialCompareAtPrice");if(Object.keys(n).some(r=>n[r]!==void 0)?d==null||d.classList.add("visually-hidden"):d==null||d.classList.remove("visually-hidden"),!e&&!o)return;let t=0,u=0,a=!0;for(const r in n)if(!n[r]){a=!1;break}for(const r in n){if(!n[r])continue;const p=parseFloat((i=n[r][1].price.slice(1))==null?void 0:i.replace(/[,]/,"."));n[r][0].type==="addOns"&&(u=p),t+=p}if(a){const r=c+(t-u).toFixed(2);e.textContent=r}else{const r=c+t.toFixed(2);e.textContent=r}const s=document.querySelector("#SubtotalValueCompare");document.querySelector("#BtnCompareValue");const l=document.querySelector("#SavingsPercentValue");a?(s.textContent=c+t.toFixed(2),s.classList.remove("jc-opacity-0")):(s.textContent="",s.classList.add("jc-opacity-0")),a&&t>0&&u>0?l.textContent=`Save ${(100/t*u).toFixed(0)}%`:l.textContent="",t>0||(e.textContent=window.minimalBundlePriceLabel)}window.addEventListener("DOMContentLoaded",async()=>{var n;if(document.querySelector("jc-product-picker")){if(window.location.search.indexOf("bundle-id")>-1){window.foxSellBundlesStorage={};const e=await(await fetch(`${window.theme.routes.cart_url}.js`)).json();e.items.filter(s=>s.properties["__foxsell:dynamic_bundle_id"]!=null).map(s=>{window.foxSellBundlesStorage[`${s.properties["__foxsell:dynamic_bundle_id"]}`]=s.properties["__foxsell:dynamic_bundle_category"]});const d=e.items.filter(s=>s.properties["__foxsell:dynamic_add_on_bundle_id"]!=null);d.map(s=>{window.foxSellBundlesStorage[`${s.properties["__foxsell:dynamic_add_on_bundle_id"]}`]=s.properties["__foxsell:dynamic_add_on_bundle_items"]});let u=window.location.search.split("&")[0].split("=")[1];JSON.parse(window.foxSellBundlesStorage[u]).map(s=>{const l=document.querySelector(`[data-category="${s.category}"][data-id="${s.variantId}"]`);l.closest("jc-product-picker").fill(l),d&&q()}),history.pushState(null,null,window.location.origin+window.location.pathname),(n=document.querySelector("jc-product-picker"))==null||n.dispatchEvent(new Event("click",{bubbles:!0}))}else sessionStorage.setItem("bundleIdToRemove","");P==null||P.addEventListener("click",()=>{I(),w.dataset.bundleType.includes("foxsell-add-on")&&q()}),w==null||w.addEventListener("click",async c=>{c.preventDefault(),w.setAttribute("disabled","disabled"),w.setAttribute("aria-busy","true"),m==null||m.setAttribute("disabled","disabled"),m==null||m.setAttribute("aria-busy","true");let e=await M();if(e==null)return;const o=T.closest(".shopify-product-form"),d=o==null?void 0:o.querySelector("[name='return_to']");fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(async t=>await t.json()).then(async t=>{if(w.removeAttribute("disabled"),w.removeAttribute("aria-busy"),m==null||m.removeAttribute("disabled"),m==null||m.removeAttribute("aria-busy"),t.status){theme.pubsub.publish(theme.pubsub.PUB_SUB_EVENTS.cartError,{source:"product-form",productVariantId:window.bundleProductId,errors:t.errors||t.description,message:t.message}),document.dispatchEvent(new CustomEvent("ajaxProduct:error",{detail:{errorMessage:t.description}}));return}if(!d){const u=document.querySelector("cart-drawer");if(!u)return;const a=await(await fetch("/cart.js")).json();a.sections=t.sections,theme.pubsub.publish(theme.pubsub.PUB_SUB_EVENTS.cartUpdate,{cart:a}),document.dispatchEvent(new CustomEvent("ajaxProduct:added",{detail:{product:t}})),u.show()}I(),w.dataset.bundleType.includes("foxsell-add-on")&&q()}).then(()=>{d&&(window.location.href="/checkout")}).catch(t=>{console.error("Add to cart error:",t)})}),m==null||m.addEventListener("click",c=>{c.preventDefault(),w.dispatchEvent(new Event("click",{bubbles:!0}))})}});var b,v,L,C,g;class N extends HTMLElement{constructor(){super();S(this,b,void 0);S(this,v,void 0);S(this,L,void 0);S(this,C,void 0);k(this,"disabled",!1);S(this,g,new Map);k(this,"selectOption",e=>{this.fill(e),this.dispatchEvent(new CustomEvent("option:selected",{detail:{value:e.dataset.value}}))});const e=document.querySelector("#jc-product-picker").content;this.appendChild(e.cloneNode(!0)),this.loader=this.querySelector("[data-loader]")}async connectedCallback(){this.loader.classList.add("loaded");const e=this.querySelector(".picker"),o=this.querySelector(".picker-btn"),d=this.querySelector(".picker-dropdown .dropdown-content");this.querySelector(".dropdown-indicator");const t=this.querySelectorAll("jc-product-option"),u=document.getElementById("AddToCart");E(this,b,this.querySelector(".search-filter")),E(this,v,this.querySelector(".clear-button")),E(this,C,this.querySelector(".message-container"));const a=this.querySelector(".gender-filters").children;d.append(...t),this.querySelector(".new-price").textContent=this.dataset.newPriceLabel,this.querySelector("img").src=this.dataset.imgsrc;const s=this.querySelectorAll("jc-product-option");s.forEach(p=>{p.addEventListener("click",()=>{this.selectOption(p),u.dataset.bundleType.includes("foxsell-add-on")&&(q(),$()),this.close()})}),o.addEventListener("click",()=>{this.toggle(),y(this,g).size<1&&this.dispatchEvent(new CustomEvent("changed",{detail:{}}))}),this.querySelector(".popup-close-btn").addEventListener("click",()=>this.close()),document.addEventListener("click",p=>{e.contains(p.target)||this.close()}),this.dataset.hidePrices&&this.querySelector(".prev-price").classList.add("visually-hidden"),this.addEventListener("changed",()=>this.updateDropdownContent()),y(this,b).addEventListener("input",()=>{const p=y(this,b).value.trim();(p==null?void 0:p.length)<1?y(this,v).classList.add("visually-hidden"):y(this,v).classList.remove("visually-hidden"),this.dispatchEvent(new CustomEvent("changed",{detail:{}}))}),y(this,v).addEventListener("click",()=>{y(this,b).value="",y(this,v).classList.add("visually-hidden"),this.dispatchEvent(new CustomEvent("changed",{detail:{}}))}),Array.from(a).forEach(p=>{p.addEventListener("click",()=>{var h,f;((h=p.dataset)==null?void 0:h.category)!==y(this,L)&&(E(this,L,(f=p.dataset)==null?void 0:f.category),this.dispatchEvent(new CustomEvent("changed",{detail:{}})))})}),this.addEventListener("option:selected",()=>{var h;Object.values(window.bundleProducts).filter(f=>f!=null).length===3&&(document.getElementById("MainPaymentContainer").classList.remove("jc-opacity-40","jc-pointer-events-none"),(h=document.getElementById("StickyAddToCart"))==null||h.classList.remove("jc-opacity-40","jc-pointer-events-none"))});const l=window.preselectProductIds;if(!l||(l==null?void 0:l.length)<1)return;const i=Number(this.id.split("-").at(-1)),r=i-1;l.forEach((p,h)=>{if(h!==r)return;const f=Array.from(s).find(x=>x.dataset.primaryId===p);if(!f){console.info(`Cannot preselect the product for picker #${i}. Option with id of ${p} does not exist.`);return}this.fill(f),u.dataset.bundleType.includes("foxsell-add-on")&&(q(),$(),this.dispatchEvent(new MouseEvent("option:selected")))})}open(){const e=this.querySelector(".picker");e&&(e.classList.add("jc-is-opened"),document.body.classList.add("block-mobile-scroll"))}toggle(){const e=this.querySelector(".picker");e&&e.classList.toggle("jc-is-opened"),e!=null&&e.classList.contains("jc-is-opened")?document.body.classList.add("block-mobile-scroll"):document.body.classList.remove("block-mobile-scroll")}close(){const e=this.querySelector(".picker");e!=null&&e.classList.contains("jc-is-opened")&&document.body.classList.remove("block-mobile-scroll"),e&&e.classList.remove("jc-is-opened")}fill(e){var s,l,i;const o=this.querySelector(".text"),d=this.querySelector(".badge"),[t,u,a]=o.children;if(this.querySelector("img").src=e.dataset.imgsrc,t.textContent=e.dataset.title,e.dataset.inspiredByBrand&&e.dataset.inspiredByName?u.innerHTML=`Inspired by: <span class="brand-name">${e.dataset.inspiredByBrand}'s</span> ${e.dataset.inspiredByName}`:u.innerHTML="",!this.dataset.hidePrices){const r=a.querySelector(".prev-price");r.textContent=(s=e.dataset.price)==null?void 0:s.replace(/[,]/,".")}((l=e.dataset.gender)==null?void 0:l.length)>0?(d.classList.remove("visually-hidden"),d.textContent=e.dataset.gender):d.classList.add("visually-hidden"),d.style.backgroundColor=e.dataset.badgeColor,this.querySelector(".select_placeholder").hidden=!0,window.bundleProducts[`product_${this.id.split("-")[1]}`]=[{variantId:parseInt(e.dataset.id),category:e.dataset.category,quantity:1,type:e.dataset.type,properties:e.dataset.type==="product"?{Type:""}:{Type:"",Gift:"Free"}},{title:e.dataset.title,price:(i=e.dataset.price)==null?void 0:i.replace(/[,]/,".")}],this.updatePickersState()}updatePickersState(){const e=document.querySelectorAll("jc-product-picker"),o=document.querySelectorAll(".js-disabled-selector"),t=e.item(e.length-1).querySelector(".picker-btn .text");let u=!0;const a=Object.values(window.bundleProducts);for(let r=0;r<a.length;r++)if(!a[r]){u=!1;break}let s=0;for(let r=0;r<a.length;r++)a[r]&&++s;o.forEach((r,p)=>{p<=s&&r.classList.remove("jc-opacity-50","jc-pointer-events-none")});const l=t==null?void 0:t.querySelector(".new-price"),i=t==null?void 0:t.querySelector(".prev-price");!l&&!i||(l&&u&&l.classList.remove("hide"),u&&!this.dataset.hidePrices?i==null||i.classList.add("price-strikethrough"):l==null||l.classList.add("hide"))}reset(){const e=this.querySelector(".picker-btn-content"),o=this.querySelector("img"),d=this.querySelector(".text"),[t,u,a]=d.children,s=this.querySelector(".new-price"),l=this.querySelector(".badge");if(t.textContent="",u.innerHTML="",s.classList.add("hide"),l.textContent="",l.style.backgroundColor="",o.src=this.dataset.imgsrc,e.querySelector(".select_placeholder").hidden=!1,!this.dataset.hidePrices){const i=this.querySelector(".prev-price");i.textContent="",i.classList.remove("price-strikethrough")}}updateDropdownContent(){var l;const e=this.querySelector(".picker-dropdown .dropdown-content").children;if(!e){console.warn("Product picker dropdown content is missing");return}const o=Array.from(e),d=Array.from(this.querySelector(".gender-filters").children),t=(l=y(this,L))==null?void 0:l.toLowerCase(),u=y(this,b).value.trim();t?o.forEach(i=>{var r;t===((r=i.dataset.gender)==null?void 0:r.toLowerCase())?i.classList.remove("visually-hidden"):i.classList.add("visually-hidden")}):o.forEach(i=>i.classList.remove("visually-hidden")),d.forEach(i=>{var r;t===((r=i.dataset)==null?void 0:r.category)?i.classList.add("selected-category"):i.classList.remove("selected-category")});const a=new Map,s=new Set;o.forEach(i=>{var r;return s.add((r=i.dataset)==null?void 0:r.gender)}),s.forEach(i=>a.set(i,this.matchesForGenderAndSearch(i,u))),a.set("all",this.matchesForGenderAndSearch(void 0,u)),y(this,g).set("all",a.get("all").length),u.length>1?o.forEach(i=>{var h,f;const r=(h=i.dataset)==null?void 0:h.gender.toLowerCase();if(r?y(this,g).set(r,a.get(r).length):y(this,g).set("all",a.get("all").length),!((f=i.dataset)==null?void 0:f.title.toLowerCase())){console.warn("Product title is missing",i);return}a.get(r).includes(i)||i.classList.add("visually-hidden")}):o.forEach(i=>{var p;const r=(p=i.dataset)==null?void 0:p.gender.toLowerCase();y(this,g).set(r,a.get(r).length),a.get(r).includes(i)||i.classList.add("visually-hidden")}),d.forEach(i=>{var p;const r=(p=i.dataset)==null?void 0:p.category;r?i.querySelector(".quantity-container").textContent=y(this,g).get(r):i.querySelector(".quantity-container").textContent=y(this,g).get("all")}),this.updateMessageContainerVisibility(o)}matchesForGenderAndSearch(e,o){const d=this.querySelector(".picker-dropdown .dropdown-content").children;if(!d)return;let t=Array.from(d);const u=o==null?void 0:o.toLowerCase();return e&&(t=t.filter(a=>{var s,l;return((l=(s=a.dataset)==null?void 0:s.gender)==null?void 0:l.toLowerCase())===e.toLowerCase()})),o&&(t=t.filter(a=>{var p,h,f,x;const s=(p=a.dataset)==null?void 0:p.title.toLowerCase(),l=(h=a.dataset.inspiredByName)==null?void 0:h.toLowerCase(),i=(f=a.dataset.inspiredByBrand)==null?void 0:f.toLowerCase(),r=(x=a.dataset.inspiredByBrandAlias)==null?void 0:x.toLowerCase();return[s,i,r,l].some(_=>_==null?void 0:_.includes(u))})),this.updateMatchesUnderline(t,o),t}updateMatchesUnderline(e,o){e.forEach(d=>{var p;const t=d.querySelector(".title"),u=d.querySelector(".brand-name"),a=d.querySelector(".scent-name"),s=(p=d.dataset.inspiredByBrandAlias)==null?void 0:p.toLowerCase();let l=o;if(s&&(l=`${o}|${o.split(" ").map(h=>h.at(0)).join("")}`),t.innerHTML=d.dataset.title,u&&(u.innerHTML=`${d.dataset.inspiredByBrand}'s`),a&&(a.innerHTML=`${d.dataset.inspiredByName}`),!o)return;try{new RegExp(o,"gi")}catch{return}const i=new RegExp(o,"gi"),r=new RegExp(l,"gi");t.innerHTML=`${t.innerHTML.replace(i,h=>`<span class="jc-text-vividTangelo jc-underline">${h}</span>`)}`,u&&(u.innerHTML=`${u.innerHTML.replace(r,h=>`<span class="jc-text-vividTangelo jc-underline">${h}</span>`)}`),a&&(a.innerHTML=`${a.innerHTML.replace(i,h=>`<span class="jc-text-vividTangelo jc-underline">${h}</span>`)}`)})}updateMessageContainerVisibility(e){e.filter(d=>!d.classList.contains("visually-hidden")).length<1?y(this,C).classList.remove("visually-hidden"):y(this,C).classList.add("visually-hidden")}}b=new WeakMap,v=new WeakMap,L=new WeakMap,C=new WeakMap,g=new WeakMap;customElements.define("jc-product-picker",N);class H extends HTMLElement{constructor(){super();const c=document.querySelector("#jc-product-option");this.appendChild(c.content.cloneNode(!0))}connectedCallback(){var a,s;const c=this.querySelector("img"),e=this.querySelector(".title"),o=this.querySelector(".subtitle"),[d,t]=this.querySelector(".price-container").children,u=this.querySelector(".badge");c.src=this.dataset.imgsrc,e.textContent=this.dataset.title,this.dataset.inspiredByBrand&&this.dataset.inspiredByName&&(o.innerHTML=`Inspired by: <span class="brand-name">${this.dataset.inspiredByBrand}'s</span> <span class="scent-name">${this.dataset.inspiredByName}</span>`),d.textContent=(a=this.dataset.price)==null?void 0:a.replace(/[,]/,"."),this.dataset.newPrice&&(t.textContent=this.dataset.newPrice,d.classList.add("price-strikethrough"),t.classList.remove("hide")),((s=this.dataset.gender)==null?void 0:s.length)>0&&(u.style.backgroundColor=this.dataset.badgeColor,u.textContent=this.dataset.gender)}}customElements.define("jc-product-option",H);class F extends HTMLElement{constructor(){super(),this.swiper=this.querySelector("[best-reviews-swiper]")}async connectedCallback(){new Swiper(`#${this.swiper.id}`,{modules:[EffectFade,Navigation,Pagination],navigation:{nextEl:`.reviews-next-${this.swiper.id}`,prevEl:`.reviews-prev-${this.swiper.id}`},pagination:{el:`#${this.swiper.id} .swiper-pagination`,clickable:!0},slidesPerView:1,spaceBetween:16,loop:!0,effect:"fade"})}disconnectedCallback(){this.swiper.destroy(!0,!0)}}customElements.define("reviews-swiper",F);
